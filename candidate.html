<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portal Peserta - Pembuat Ujian</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />
    <!-- Common CSS -->
    <link rel="stylesheet" href="css/common.css" />
  </head>
  <body>
    <!-- Auto-save indicator -->
    <div class="auto-save-indicator" id="autoSaveIndicator" style="display: none">
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle me-2"></i>
        <span id="autoSaveText">Auto-saved</span>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse" id="sidebar">
          <div class="position-sticky pt-3">
            <div class="text-center mb-4">
              <h4 class="text-white">
                <i class="bi bi-mortarboard me-2"></i>
                Pembuat Ujian
              </h4>
            </div>

            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link" href="index.html">
                  <i class="bi bi-speedometer2 me-2"></i>
                  Dashboard
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="exam.html">
                  <i class="bi bi-file-text me-2"></i>
                  Ujian
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="questions.html">
                  <i class="bi bi-question-circle me-2"></i>
                  Bank Soal
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="participants.html">
                  <i class="bi bi-people me-2"></i>
                  Peserta
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="proctoring.html">
                  <i class="bi bi-camera-video me-2"></i>
                  Pengawas
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="reports.html">
                  <i class="bi bi-graph-up me-2"></i>
                  Laporan
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="settings.html">
                  <i class="bi bi-gear me-2"></i>
                  Pengaturan
                </a>
              </li>
              <li class="nav-item mt-4">
                <a class="nav-link active" href="candidate.html">
                  <i class="bi bi-person-check me-2"></i>
                  Tampilan Peserta
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <!-- Main content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
          <!-- Top Navbar -->
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <button class="btn btn-outline-secondary d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar">
              <i class="bi bi-list"></i>
            </button>
            <h1 class="h2">Portal Peserta</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                  <i class="bi bi-person-circle me-1"></i>
                  Peserta
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Profil</a>
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>Keluar</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Candidate Content -->
          <!-- Exam Introduction -->
          <div id="examIntro" class="text-center">
            <div class="card mx-auto" style="max-width: 800px">
              <div class="card-body p-5">
                <h2 class="card-title mb-4">
                  <i class="bi bi-mortarboard text-primary me-2"></i>
                  Ujian Akhir Matematika
                </h2>
                <p class="card-text lead mb-4">Selamat datang di ujian online Anda. Silakan baca instruksi dengan cermat sebelum memulai.</p>

                <div class="alert alert-info text-start mb-4">
                  <h6><i class="bi bi-info-circle me-2"></i>Instruksi Ujian:</h6>
                  <ul class="mb-0">
                    <li>Durasi: 120 menit</li>
                    <li>Total Soal: 25</li>
                    <li>Anda dapat berpindah antar soal menggunakan panel navigasi</li>
                    <li>Progress Anda otomatis tersimpan setiap 30 detik</li>
                    <li>Anda tidak dapat kembali ke soal sebelumnya setelah submit</li>
                    <li>Pastikan Anda memiliki koneksi internet yang stabil</li>
                  </ul>
                </div>

                <div class="alert alert-warning text-start mb-4">
                  <h6><i class="bi bi-exclamation-triangle me-2"></i>Catatan Penting:</h6>
                  <ul class="mb-0">
                    <li>Jangan beralih tab atau meminimalkan jendela browser</li>
                    <li>Jaga webcam tetap menyala selama ujian</li>
                    <li>Pastikan pencahayaan yang baik dan visibilitas yang jelas</li>
                    <li>Tidak diperbolehkan bantuan atau sumber daya eksternal</li>
                  </ul>
                </div>

                <button class="btn btn-primary btn-lg" id="startExamBtn"><i class="bi bi-play-circle me-2"></i>Mulai Ujian</button>
              </div>
            </div>
          </div>

          <!-- Pre-check Modal -->
          <div class="modal fade" id="preCheckModal" tabindex="-1" aria-labelledby="preCheckModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="preCheckModalLabel">Pemeriksaan Pra-Ujian</h5>
                </div>
                <div class="modal-body text-center">
                  <div class="mb-4">
                    <i class="bi bi-camera-video fa-3x text-primary mb-3"></i>
                    <h6>Izin Webcam Diperlukan</h6>
                    <p class="text-muted">Silakan izinkan akses webcam untuk keperluan pengawasan.</p>
                  </div>

                  <div id="webcamContainer" class="mb-3">
                    <video id="webcamVideo" width="320" height="240" autoplay muted style="display: none"></video>
                    <canvas id="webcamCanvas" width="320" height="240" style="display: none"></canvas>
                    <div id="webcamPlaceholder" class="border rounded p-4 bg-light">
                      <i class="bi bi-camera fa-2x text-muted mb-2"></i>
                      <p class="text-muted">Pratinjau webcam akan muncul di sini</p>
                    </div>
                  </div>

                  <div class="mb-3">
                    <button class="btn btn-outline-primary" id="enableWebcamBtn"><i class="bi bi-camera me-2"></i>Aktifkan Webcam</button>
                    <button class="btn btn-outline-secondary" id="uploadPhotoBtn" style="display: none"><i class="bi bi-upload me-2"></i>Upload Foto</button>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="agreeTerms" required />
                    <label class="form-check-label" for="agreeTerms"> Saya setuju dengan syarat dan ketentuan ujian </label>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" id="proceedToExamBtn" disabled>Lanjut ke Ujian</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Exam Interface -->
          <div id="examInterface" style="display: none">
            <!-- Exam Header -->
            <div class="card mb-4">
              <div class="card-body">
                <div class="row align-items-center">
                  <div class="col-md-6">
                    <h5 class="mb-0">Ujian Akhir Matematika</h5>
                    <small class="text-muted">Soal <span id="currentQuestionNum">1</span> dari 25</small>
                  </div>
                  <div class="col-md-6 text-end">
                    <div class="timer h4 text-danger" id="examTimer">02:00:00</div>
                    <small class="text-muted">Waktu Tersisa</small>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <!-- Question Area -->
              <div class="col-md-8">
                <div class="card">
                  <div class="card-body">
                    <h6 class="card-title">Soal <span id="questionNumber">1</span></h6>
                    <p class="card-text" id="questionText">Berapakah turunan dari x²?</p>

                    <div class="mt-4" id="optionsContainer">
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="answer" id="optionA" value="A" />
                        <label class="form-check-label" for="optionA"> A) 2x </label>
                      </div>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="answer" id="optionB" value="B" />
                        <label class="form-check-label" for="optionB"> B) x </label>
                      </div>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="answer" id="optionC" value="C" />
                        <label class="form-check-label" for="optionC"> C) 2 </label>
                      </div>
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="answer" id="optionD" value="D" />
                        <label class="form-check-label" for="optionD"> D) x² </label>
                      </div>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                      <button class="btn btn-outline-secondary" id="prevQuestionBtn" disabled><i class="bi bi-arrow-left me-1"></i>Sebelumnya</button>
                      <button class="btn btn-primary" id="nextQuestionBtn">Selanjutnya <i class="bi bi-arrow-right ms-1"></i></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Navigation Panel -->
              <div class="col-md-4">
                <div class="card question-nav">
                  <div class="card-header">
                    <h6 class="mb-0">Navigasi Soal</h6>
                  </div>
                  <div class="card-body">
                    <div class="d-flex flex-wrap" id="questionNavigation">
                      <!-- Question navigation items will be generated here -->
                    </div>

                    <hr />

                    <div class="d-grid gap-2">
                      <button class="btn btn-success" id="submitExamBtn"><i class="bi bi-check-circle me-1"></i>Submit Ujian</button>
                      <button class="btn btn-outline-primary" id="reviewAnswersBtn"><i class="bi bi-eye me-1"></i>Review Jawaban</button>
                    </div>

                    <div class="mt-3">
                      <small class="text-muted">
                        <i class="bi bi-info-circle me-1"></i>
                        <span id="answeredCount">0</span> dari 25 dijawab
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Submit Exam Modal -->
    <div class="modal fade" id="submitExamModal" tabindex="-1" aria-labelledby="submitExamModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="submitExamModalLabel">Submit Ujian</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Apakah Anda yakin ingin mengirim ujian? Tindakan ini tidak dapat dibatalkan.</p>
            <div class="alert alert-info">
              <i class="bi bi-info-circle me-2"></i>
              <strong>Catatan:</strong> Jawaban Anda telah otomatis tersimpan. Anda dapat meninjau respons sebelum mengirim.
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Review Jawaban</button>
            <button type="button" class="btn btn-success" id="confirmSubmitBtn">Submit Ujian</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Common JS -->
    <script src="js/common.js"></script>
    <!-- Candidate specific JS -->
    <script src="js/candidate.js"></script>
  </body>
</html>
